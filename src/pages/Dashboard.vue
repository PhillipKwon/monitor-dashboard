<template>
  <div>
    <h2>ğŸ“Š ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ</h2>
    <p v-if="isLoading">ë¡œë”© ì¤‘...</p>
    <p v-if="isError">ì—ëŸ¬ ë°œìƒ: {{ error?.message }}</p>
    <div v-else>
      <p>CPU ì‚¬ìš©ëŸ‰: {{ data?.cpu }}%</p>
      <p>Memory ì‚¬ìš©ëŸ‰: {{ data?.memory }}%</p>
      <p>Network ì‚¬ìš©ëŸ‰: {{ data?.network }} Mbps</p>
    </div>
  </div>
</template>

<script setup lang="ts">
import { fetchMetrics } from '@/api/dashboard';
import { useQuery } from '@tanstack/vue-query';

// import { useDashboardStore } from '@/stores/useDashboardStore'
// const store = useDashboardStore()
// access QueryClient instance
const { data, isLoading, isError, error} = useQuery({
  queryKey: ['dashboard'],
  queryFn: fetchMetrics,
  refetchInterval: 5000
})

</script>
